(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(43),c=a.n(o),i=a(17),s=a(7),l=a(45),d=a(46),u=a(4),p={cities:[],selectedCity:{}},h=a(48),m={day:"",notes:[]},f={addNote:!1,notes:!1,cities:!1},y={currentWeather:{},weatherForecast:[],weatherHistory:{}},g=Object(s.combineReducers)({cities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"cities/GET_CITIES":return Object(u.a)({},e,{cities:t.payload});case"cities/SET_INITIAL_CITY":case"cities/SET_CITY":return Object(u.a)({},e,{selectedCity:t.payload});default:return e}},calendar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"calendar/GET_INITIAL_DAY":case"calendar/SET_DAY":return Object(u.a)({},e,{day:t.payload});case"calendar/GET_NOTES":return Object(u.a)({},e,{notes:t.payload});case"calendar/ADD_NOTE":return Object(u.a)({},e,{notes:[].concat(Object(h.a)(e.notes),[t.payload])});case"calendar/DELETE_NOTE":return Object(u.a)({},e,{notes:e.notes.filter(function(e){return e.id!==t.payload})});default:return e}},modals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"modals/TOGGLE_MODAL":return Object(u.a)({},e,t.payload);default:return e}},weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"weather/GET_CURRENT_WEATHER":return Object(u.a)({},e,{currentWeather:t.payload});case"weather/GET_WEATHER_FORECAST":return Object(u.a)({},e,{weatherForecast:t.payload});case"weather/GET_WEATHER_HISTORY":return Object(u.a)({},e,{weatherHistory:t.payload});default:return e}}}),v=Object(s.createStore)(g,{},Object(d.composeWithDevTools)(Object(s.applyMiddleware)(l.a))),E=a(8),b=a(9),_=a(11),N=a(10),M=a(12),T=a(16),D=a(2),O=a.n(D),w=function(){return function(e){var t=localStorage.getItem("day");e(t?{type:"calendar/GET_INITIAL_DAY",payload:new Date(t)}:{type:"calendar/GET_INITIAL_DAY",payload:new Date})}},j=function(e){return function(t){localStorage.setItem("day",e.toString()),t({type:"calendar/SET_DAY",payload:new Date(e)})}},C=function(e){return function(t){var a=JSON.parse(localStorage.getItem("notes")),n=O()(e).format("DD/MM/YY");t({type:"calendar/GET_NOTES",payload:a[n]?a[n]:[]})}},I=function(e,t){return function(a){var n,r=JSON.parse(localStorage.getItem("notes")),o=O()(t).format("DD/MM/YY");r?r[o]?(n=r[o][r[o].length-1].id+1,r[o].push({note:e,id:n})):(n=1,r[o]=[{note:e,id:n}]):(n=1,r=Object(T.a)({},o,[{note:e,id:n}])),localStorage.setItem("notes",JSON.stringify(r)),a({type:"calendar/ADD_NOTE",payload:{note:e,id:n}})}},S=function(e){return function(t,a){var n=O()(a().calendar.day).format("DD/MM/YY"),r=JSON.parse(localStorage.getItem("notes"));r[n]=r[n].filter(function(t){return t.id!==parseInt(e)}),r[n].length||delete r[n],localStorage.setItem("notes",JSON.stringify(r)),t({type:"calendar/DELETE_NOTE",payload:parseInt(e)})}},k=function(e){return function(t,a){var n=a().modals[e];t({type:"modals/TOGGLE_MODAL",payload:Object(T.a)({},e,!n)})}},Y=a(13),A=a.n(Y),W=a(18),x=a(20),G=a.n(x),H=function(){return G.a.get("https://restcountries.eu/rest/v2/region/europe",{params:{fields:"capital;latlng;name"}})},R=function(e){return G.a.get("https://api.apixu.com/v1/current.json",{params:{key:"1dc82a4d18514ec386672253182612",q:e.join(",")}})},L=function(e,t){var a=O()(t).format("YYYY-MM-DD");return G.a.get("https://api.apixu.com/v1/history.json",{params:{key:"1dc82a4d18514ec386672253182612",q:e.join(","),dt:a}})},F=function(e){return G.a.get("https://api.apixu.com/v1/forecast.json",{params:{key:"1dc82a4d18514ec386672253182612",q:e.join(","),days:7}})},J=function(e){return function(){var t=Object(W.a)(A.a.mark(function t(a){var n;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R(e);case 3:n=t.sent,a({type:"weather/GET_CURRENT_WEATHER",payload:n.data.current}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},V=function(e,t){return function(){var a=Object(W.a)(A.a.mark(function a(n){var r;return A.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,L(e,t);case 3:r=a.sent,n({type:"weather/GET_WEATHER_HISTORY",payload:r.data.forecast.forecastday[0]}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.error(a.t0);case 10:case"end":return a.stop()}},a,this,[[0,7]])}));return function(e){return a.apply(this,arguments)}}()},U=function(e){return function(){var t=Object(W.a)(A.a.mark(function t(a){var n;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F(e);case 3:n=t.sent,a({type:"weather/GET_WEATHER_FORECAST",payload:n.data.forecast.forecastday}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},q=a(14),P=a(15),B=a(49),K=function(e){var t=e.Modal,a=e.className,n=e.caption,o=e.toggleModal,c=Object(B.a)(e,["Modal","className","caption","toggleModal"]);return r.a.createElement("div",{className:"modal ".concat(a)},r.a.createElement("div",{className:"modal-inner"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h3",{className:"modal-header__caption"},n),r.a.createElement("button",{onClick:o,className:"modal-header__close-button"},r.a.createElement(q.a,{icon:P.c}))),r.a.createElement(t,c)))},$=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(_.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).state={note:""},a.handleTextChange=function(e){a.setState({note:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.onSubmit(a.state.note)},a}return Object(M.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{className:"form"},r.a.createElement("textarea",{rows:"10",cols:"50",className:"form__textarea",onChange:this.handleTextChange,value:this.state.note}),r.a.createElement("button",{onClick:this.handleSubmit,type:"submit",className:"form__btn"},"Add Note"))}}]),t}(n.Component),z=function(e){var t=e.notes,a=e.handleDelete;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"notes-modal__notes-list"},t.map(function(e){return r.a.createElement("div",{key:"note-".concat(e.id),className:"notes-modal__note"},e.note,r.a.createElement(q.a,{onClick:a,"data-id":e.id,icon:P.c,className:"note-delete-btn"}))})),!t.length&&r.a.createElement("span",{className:"notes-modal__no-notes-message"},"There is currently no notes for this date"))},Q=a(47),X=a.n(Q),Z=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(_.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).handleDayClick=function(e){a.props.setDay(e)},a.handleModalToggle=function(e){"object"===typeof e&&"currentTarget"in e?a.props.toggleModal(e.currentTarget.dataset.modal):a.props.toggleModal(e)},a.handleNoteAdd=function(e){a.props.addNote(e,a.props.currentDay),a.handleModalToggle("addNote")},a.handleNoteDelete=function(e){a.props.deleteNote(e.currentTarget.dataset.id)},a}return Object(M.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.props.getInitialDay()}},{key:"componentDidUpdate",value:function(e){e.currentDay!==this.props.currentDay&&this.props.getNotes(this.props.currentDay)}},{key:"render",value:function(){var e=this,t=this.props.currentDay;O()();return r.a.createElement("div",{className:"calendar"},r.a.createElement("div",{className:"calendar-title"},r.a.createElement("h2",{className:"calendar-title__current-month"},O()(t).format("MMMM, YYYY")),r.a.createElement("button",{"data-modal":"notes",onClick:this.handleModalToggle,className:"calendar-title__notes-modal-btn"},r.a.createElement(q.a,{icon:P.a}),r.a.createElement("span",{className:"calendar-title__notes-count"},this.props.notes.length))),r.a.createElement(X.a,{onClickDay:this.handleDayClick,showNavigation:!1,value:t,tileDisabled:function(e){var a=e.activeStartDate,n=e.date,r=new Date(t);return a.getMonth()!==n.getMonth()||Math.abs(O()(n).diff(O()(),"days"))>=7||r.getDate()===n.getDate()},tileClassName:function(e){var a=e.date,n=["react-calendar__day"],r=new Date(t);return(r.getMonth()!==a.getMonth()||Math.abs(O()(a).diff(O()(),"days"))>=7)&&n.push("react-calendar__day--disabled"),r.getDate()===a.getDate()&&r.getMonth()===a.getMonth()&&n.push("react-calendar__day--selected"),n.join(" ")}}),r.a.createElement("button",{onClick:this.handleModalToggle,"data-modal":"addNote",className:"calendar__add-note-button"},"+ Add Notes"),this.props.addNoteModalIsVisible&&r.a.createElement(K,{className:"add-note-modal",Modal:$,caption:"Add note to the ".concat(O()(t).format("DD of MMMM")),toggleModal:function(){return e.handleModalToggle("addNote")},onSubmit:this.handleNoteAdd}),this.props.notesModalIsVisible&&r.a.createElement(K,{className:"notes-modal",Modal:z,caption:"Notes for the ".concat(O()(t).format("DD of MMMM")),toggleModal:function(){return e.handleModalToggle("notes")},notes:this.props.notes,handleDelete:this.handleNoteDelete}))}}]),t}(n.Component),ee=Object(i.b)(function(e){var t=e.calendar,a=e.modals;return{currentDay:t.day,notes:t.notes,notesModalIsVisible:a.notes,addNoteModalIsVisible:a.addNote}},function(e){return Object(s.bindActionCreators)({getInitialDay:w,setDay:j,toggleModal:k,addNote:I,getNotes:C,deleteNote:S,getWeatherHistory:V},e)})(Z),te=function(){return function(){var e=Object(W.a)(A.a.mark(function e(t){var a;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H();case 3:a=e.sent,t({type:"cities/GET_CITIES",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},ae=function(e){return function(t){var a=JSON.parse(localStorage.getItem("city"));a?(t({type:"cities/SET_INITIAL_CITY",payload:a}),t(U(a.latlng)),t(J(a.latlng))):(t({type:"cities/SET_INITIAL_CITY",payload:{name:"Ukraine",capital:"Kiev",latlng:e}}),t(U(e)),t(J(e)))}},ne=function(e){return function(t){localStorage.setItem("city",JSON.stringify(e)),t({type:"cities/SET_CITY",payload:e})}},re=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(_.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).state={city:""},a.handleSelectChange=function(e){a.setState({city:a.props.cities.find(function(t){return t.capital===e.target.value})})},a.handleSubmit=function(e){e.preventDefault(),a.props.onSubmit(a.state.city)},a}return Object(M.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({city:this.props.cities.find(function(t){return t.capital===e.props.currentCity})})}},{key:"render",value:function(){return r.a.createElement("form",null,r.a.createElement("select",{onChange:this.handleSelectChange,value:this.state.city.capital},this.props.cities.map(function(e,t){return r.a.createElement("option",{key:"city-".concat(t),value:e.capital},e.capital)})),r.a.createElement("button",{onClick:this.handleSubmit,type:"submit"},"Get Weather"))}}]),t}(n.Component),oe=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(_.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).handleModalToggle=function(e){"object"===typeof e&&"currentTarget"in e?a.props.toggleModal(e.currentTarget.dataset.modal):a.props.toggleModal(e)},a.handleCityChange=function(e){var t=a.props.currentDay;a.props.setCity(e),a.handleModalToggle("cities"),a.props.getCurrentWeather(e.latlng),a.props.getWeatherForecast(e.latlng),O()(t).diff(O()(),"days")<0&&a.props.getWeatherHistory(e.latlng,t)},a}return Object(M.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getCities(),"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(t){var a=t.coords;e.props.setInitialCity([a.latitude,a.longitude])}):alert("Please switch your browser to chrome")}},{key:"componentDidUpdate",value:function(){var e=this.props.currentDay;this.props.currentCity.latlng&&this.props.weatherHistory.date!==O()(e).format("YYYY-MM-DD")&&O()(e).diff(O()(),"days")<0&&this.props.getWeatherHistory(this.props.currentCity.latlng,e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentDay,n=t.currentWeather,o=t.weatherForecast,c=t.weatherHistory,i=0===O()(a).diff(O()(),"days"),s=function(){var e=O()(a).diff(O()(),"days"),t=O()(a).format("YYYY-MM-DD");return 0===e?n:e<0?c.day:e>0?o.find(function(e){return e.date===t}).day:void 0}();return r.a.createElement("div",{className:"weather-pane"},r.a.createElement("div",{className:"weather-pane__head"},r.a.createElement("h2",{className:"weather-pane__week-day"},O()(this.props.currentDay).format("dddd")),r.a.createElement("p",{className:"weather-pane__date"},O()(this.props.currentDay).format("MMMM DD, YYYY"))),r.a.createElement("div",{className:"weather-pane__footer"},!!s&&s.condition&&r.a.createElement("div",{className:"weather-pane__forecast"},r.a.createElement("img",{className:"weather-pane__condition-img",src:s.condition.icon,alt:""}),r.a.createElement("p",{className:"weather-pane__temp"},parseInt(i?s.temp_c:s.avgtemp_c),r.a.createElement("span",null,"c")),r.a.createElement("p",{className:"weather-pane__condition-text"},s.condition.text)),r.a.createElement("button",{onClick:this.handleModalToggle,"data-modal":"cities",className:"weather-pane__current-city-btn"},r.a.createElement(q.a,{icon:P.b}),"".concat(this.props.currentCity.capital,", ").concat(this.props.currentCity.name))),this.props.citiesModalIsVisible&&r.a.createElement(K,{className:"cities-modal",toggleModal:function(){return e.handleModalToggle("cities")},Modal:re,caption:"Select a city to get weather",cities:this.props.cities,currentCity:this.props.currentCity.capital,onSubmit:this.handleCityChange}))}}]),t}(n.PureComponent),ce=Object(i.b)(function(e){var t=e.calendar,a=e.cities,n=e.modals,r=e.weather;return{currentDay:t.day,cities:a.cities,currentCity:a.selectedCity,citiesModalIsVisible:n.cities,currentWeather:r.currentWeather,weatherForecast:r.weatherForecast,weatherHistory:r.weatherHistory}},function(e){return Object(s.bindActionCreators)({getCities:te,setInitialCity:ae,setCity:ne,toggleModal:k,getCurrentWeather:J,getWeatherHistory:V,getWeatherForecast:U},e)})(oe),ie=function(e){function t(){return Object(E.a)(this,t),Object(_.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"inner-wrapper"},r.a.createElement(ce,null),r.a.createElement(ee,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(99);c.a.render(r.a.createElement(i.a,{store:v},r.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},50:function(e,t,a){e.exports=a(101)},99:function(e,t,a){}},[[50,2,1]]]);
//# sourceMappingURL=main.40e372d9.chunk.js.map